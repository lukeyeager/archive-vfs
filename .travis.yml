language: python

matrix:
    include:
        - os: linux
          python: 2.7
        - os: linux
          python: 3.5

cache:
    - pip

install:
    - pip install .
    - pip install -r requirements-test.txt
    - git archive -o git.tar HEAD

script:
    - flake8
    - python -m archive_vfs benchmark .
    - python -m archive_vfs benchmark . -t 4 -l threading
    - python -m archive_vfs benchmark . -t 4 -l multiprocessing
    - python -m archive_vfs benchmark git.tar
    - python -m archive_vfs benchmark git.tar -t 4 -l threading
